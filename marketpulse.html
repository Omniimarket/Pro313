<!DOCTYPE html>
<html>
<head>
  <title>MarketPulse</title>
  <style>
    /* SIMPLE STYLES - NO EXTERNAL FILES NEEDED */
    body { font-family: Arial; margin: 20px; }
    #ticker-buttons { margin: 20px 0; }
    button { padding: 10px; margin-right: 10px; }
    #chart { width: 100%; height: 400px; border: 1px solid #ddd; }
  </style>
</head>
<body>

<!-- ONLY 3 ESSENTIAL ELEMENTS -->
<div id="ticker-buttons"></div>
<div id="chart"></div>
<div id="signals"></div>

<!-- 1. LOAD CHART LIBRARY -->
<script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.0.0/dist/lightweight-charts.standalone.production.min.js"></script>

<!-- 2. SIMPLE WORKING SCRIPT -->
<script>
// STEP 1: WAIT FOR PAGE TO LOAD
window.addEventListener('load', function() {

  // STEP 2: CHECK ELEMENTS EXIST
  const buttonsDiv = document.getElementById('ticker-buttons');
  const chartDiv = document.getElementById('chart');
  
  if (!buttonsDiv || !chartDiv) {
    alert("Error: Missing required elements!");
    return;
  }

  // STEP 3: HARDCODED DATA
  const stocks = {
    "AAPL": { price: 190.50, change: -1.2 },
    "NVDA": { price: 450.75, change: +5.3 }
  };

  // STEP 4: CREATE BUTTONS
  Object.keys(stocks).forEach(ticker => {
    const btn = document.createElement('button');
    btn.textContent = ticker;
    btn.onclick = () => updateChart(ticker);
    buttonsDiv.appendChild(btn);
  });

  // STEP 5: INITIALIZE CHART
  let chart = LightweightCharts.createChart(chartDiv, {
    width: chartDiv.clientWidth,
    height: chartDiv.clientHeight
  });
  let lineSeries = chart.addLineSeries();

  // STEP 6: BASIC CHART UPDATE
  function updateChart(ticker) {
    lineSeries.setData([
      { time: '2023-01-01', value: stocks[ticker].price - 10 },
      { time: '2023-01-02', value: stocks[ticker].price },
      { time: '2023-01-03', value: stocks[ticker].price + 10 }
    ]);
    document.getElementById('signals').innerHTML = `
      <h3>${ticker}</h3>
      <p>Price: $${stocks[ticker].price.toFixed(2)}</p>
      <p>Change: ${stocks[ticker].change > 0 ? '+' : ''}${stocks[ticker].change}%</p>
    `;
  }

  // STEP 7: LOAD FIRST STOCK
  updateChart(Object.keys(stocks)[0]);
});
</script>

</body>
</html>
